import{_ as e}from"./plugin-vue_export-helper.21dcd24c.js";import{o,c,b as n,a as t,d as s,e as p,r as l}from"./app.5a33c45d.js";const i={},u=n("h2",{id:"mybatis\u7F13\u5B58",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#mybatis\u7F13\u5B58","aria-hidden":"true"},"#"),s(" mybatis\u7F13\u5B58")],-1),k={href:"https://www.cnblogs.com/happyflyingpig/p/7739749.html",target:"_blank",rel:"noopener noreferrer"},d=s("\u7F13\u5B58\u4ECB\u7ECD"),r={href:"https://cloud.tencent.com/developer/article/1650481",target:"_blank",rel:"noopener noreferrer"},m=s("\u4E00\u7EA7\u7F13\u5B58\u5B58\u5728\u7684\u95EE\u9898"),v=p(`<h4 id="_1\u3001-\u4E00\u7EA7\u7F13\u5B58" tabindex="-1"><a class="header-anchor" href="#_1\u3001-\u4E00\u7EA7\u7F13\u5B58" aria-hidden="true">#</a> 1\u3001 \u4E00\u7EA7\u7F13\u5B58</h4><p>mybatis\u7F13\u5B58\u6709\u4E00\u7EA7\u7F13\u5B58\u4E5F\u53EBSelSession\u7F13\u5B58\uFF0C\u662F\u5F3A\u5236\u6253\u5F00\u7684\uFF0C\u4E5F\u5C31\u662F\u8BF4Mybatis\u6CA1\u6709\u63D0\u4F9B\u5173\u95ED\u4E00\u7EA7\u7F13\u5B58\u7684\u65B9\u5F0F\u3002\u4E00\u7EA7\u7F13\u5B58\u53EA\u662F\u76F8\u5BF9\u4E8E<strong>\u540C\u4E00\u4E2ASqlSession</strong>\u800C\u8A00\u3002\u6240\u4EE5\u5728\u53C2\u6570\u548CSQL\u5B8C\u5168\u4E00\u6837\u7684\u60C5\u51B5\u4E0B\uFF0C\u6211\u4EEC\u4F7F\u7528\u540C\u4E00\u4E2ASqlSession\u5BF9\u8C61\u8C03\u7528\u4E00\u4E2AMapper\u65B9\u6CD5\uFF0C\u5F80\u5F80\u53EA\u6267\u884C\u4E00\u6B21SQL\uFF0C\u56E0\u4E3A\u4F7F\u7528SelSession\u7B2C\u4E00\u6B21\u67E5\u8BE2\u540E\uFF0CMyBatis\u4F1A\u5C06\u5176\u67E5\u8BE2\u7ED3\u679C\u653E\u5728\u7F13\u5B58\u4E2D\uFF0C\u4EE5\u540E\u518D\u67E5\u8BE2\u7684\u65F6\u5019\uFF0C\u5982\u679C\u6CA1\u6709\u58F0\u660E\u9700\u8981\u5237\u65B0\uFF0C\u5E76\u4E14\u7F13\u5B58\u6CA1\u6709\u8D85\u65F6\u7684\u60C5\u51B5\u4E0B\uFF0CSqlSession\u90FD\u4F1A\u53D6\u51FA\u5F53\u524D\u7F13\u5B58\u7684\u6570\u636E\uFF0C\u800C\u4E0D\u4F1A\u518D\u6B21\u53D1\u9001SQL\u5230\u6570\u636E\u5E93\u3002\u4E00\u7EA7\u7F13\u5B58\u7684\u5B58\u50A8\u4F4D\u7F6E\u662F\u5728JVM\u865A\u62DF\u673A\u5185\u5B58\uFF0C\u5B83\u653E\u5728\u4E00\u4E2AMap\u4E2D</p><h5 id="_1-1-\u4E00\u7EA7\u7F13\u5B58\u7684\u751F\u547D\u5468\u671F\u6709\u591A\u957F" tabindex="-1"><a class="header-anchor" href="#_1-1-\u4E00\u7EA7\u7F13\u5B58\u7684\u751F\u547D\u5468\u671F\u6709\u591A\u957F" aria-hidden="true">#</a> 1.1 \u4E00\u7EA7\u7F13\u5B58\u7684\u751F\u547D\u5468\u671F\u6709\u591A\u957F\uFF1F</h5><p>a\u3001MyBatis\u5728\u5F00\u542F\u4E00\u4E2A\u6570\u636E\u5E93\u4F1A\u8BDD\u65F6\uFF0C\u4F1A \u521B\u5EFA\u4E00\u4E2A\u65B0\u7684SqlSession\u5BF9\u8C61\uFF0CSqlSession\u5BF9\u8C61\u4E2D\u4F1A\u6709\u4E00\u4E2A\u65B0\u7684Executor\u5BF9\u8C61\u3002Executor\u5BF9\u8C61\u4E2D\u6301\u6709\u4E00\u4E2A\u65B0\u7684PerpetualCache\u5BF9\u8C61\uFF1B\u5F53\u4F1A\u8BDD\u7ED3\u675F\u65F6\uFF0CSqlSession\u5BF9\u8C61\u53CA\u5176\u5185\u90E8\u7684Executor\u5BF9\u8C61\u8FD8\u6709PerpetualCache\u5BF9\u8C61\u4E5F\u4E00\u5E76\u91CA\u653E\u6389\u3002</p><p>b\u3001\u5982\u679CSqlSession\u8C03\u7528\u4E86close()\u65B9\u6CD5\uFF0C\u4F1A\u91CA\u653E\u6389\u4E00\u7EA7\u7F13\u5B58PerpetualCache\u5BF9\u8C61\uFF0C\u4E00\u7EA7\u7F13\u5B58\u5C06\u4E0D\u53EF\u7528\u3002</p><p>c\u3001\u5982\u679CSqlSession\u8C03\u7528\u4E86clearCache()\uFF0C\u4F1A\u6E05\u7A7APerpetualCache\u5BF9\u8C61\u4E2D\u7684\u6570\u636E\uFF0C\u4F46\u662F\u8BE5\u5BF9\u8C61\u4ECD\u53EF\u4F7F\u7528\u3002</p><p>d\u3001SqlSession\u4E2D\u6267\u884C\u4E86\u4EFB\u4F55\u4E00\u4E2Aupdate\u64CD\u4F5C(update()\u3001delete()\u3001insert()) \uFF0C\u90FD\u4F1A\u6E05\u7A7APerpetualCache\u5BF9\u8C61\u7684\u6570\u636E\uFF0C\u4F46\u662F\u8BE5\u5BF9\u8C61\u53EF\u4EE5\u7EE7\u7EED\u4F7F\u7528</p><h4 id="_1-2\u3001\u600E\u4E48\u5224\u65AD\u67D0\u4E24\u6B21\u67E5\u8BE2\u662F\u5B8C\u5168\u76F8\u540C\u7684\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#_1-2\u3001\u600E\u4E48\u5224\u65AD\u67D0\u4E24\u6B21\u67E5\u8BE2\u662F\u5B8C\u5168\u76F8\u540C\u7684\u67E5\u8BE2" aria-hidden="true">#</a> 1. 2\u3001\u600E\u4E48\u5224\u65AD\u67D0\u4E24\u6B21\u67E5\u8BE2\u662F\u5B8C\u5168\u76F8\u540C\u7684\u67E5\u8BE2\uFF1F</h4><p>mybatis\u8BA4\u4E3A\uFF0C\u5BF9\u4E8E\u4E24\u6B21\u67E5\u8BE2\uFF0C\u5982\u679C\u4EE5\u4E0B\u6761\u4EF6\u90FD\u5B8C\u5168\u4E00\u6837\uFF0C\u90A3\u4E48\u5C31\u8BA4\u4E3A\u5B83\u4EEC\u662F\u5B8C\u5168\u76F8\u540C\u7684\u4E24\u6B21\u67E5\u8BE2\u3002</p><p>2.1 \u4F20\u5165\u7684statementId</p><p>2.2 \u67E5\u8BE2\u65F6\u8981\u6C42\u7684\u7ED3\u679C\u96C6\u4E2D\u7684\u7ED3\u679C\u8303\u56F4</p><p>2.3. \u8FD9\u6B21\u67E5\u8BE2\u6240\u4EA7\u751F\u7684\u6700\u7EC8\u8981\u4F20\u9012\u7ED9JDBC java.sql.Preparedstatement\u7684Sql\u8BED\u53E5\u5B57\u7B26\u4E32\uFF08boundSql.getSql() \uFF09</p><p>2.4 \u4F20\u9012\u7ED9java.sql.Statement\u8981\u8BBE\u7F6E\u7684\u53C2\u6570\u503C</p><h4 id="_1-3-\u4E00\u7EA7\u7F13\u5B58\u7684\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#_1-3-\u4E00\u7EA7\u7F13\u5B58\u7684\u95EE\u9898" aria-hidden="true">#</a> 1.3 \u4E00\u7EA7\u7F13\u5B58\u7684\u95EE\u9898</h4><p>\u524D\u9762\u8BF4\u4E86\u4E00\u7EA7\u7F13\u5B58\u662F\u9488\u5BF9\u540C\u4E00\u4E2ASelSession\uFF0C\u5982\u679C\u7528SqlSession\u53BB\u6267\u884C\u540C\u4E00\u4E2A\u67E5\u8BE2\u4E24\u6B21\uFF0C\u4F1A\u53D1\u73B0\u53EA\u6709\u4E00\u6B21\u6253\u5370\u51FA\u4E86sql\uFF0C\u8BF4\u660E\u4E00\u7EA7\u7F13\u5B58\u751F\u6548\u4E86</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code> <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pageQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> resource <span class="token operator">=</span> <span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sqlSession<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">RowBounds</span> rowBounds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RowBounds</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Order</span><span class="token punctuation">&gt;</span></span> orders <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span><span class="token string">&quot;com.chen.mapper.OrderMapper.pageQuery&quot;</span><span class="token punctuation">,</span> rowBounds<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>orders<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Order</span><span class="token punctuation">&gt;</span></span> orders1 <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span><span class="token string">&quot;com.chen.mapper.OrderMapper.pageQuery&quot;</span><span class="token punctuation">,</span> rowBounds<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>orders1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://afatpig.oss-cn-chengdu.aliyuncs.com/blog/image-20210926204622261-16326603908611.png" alt="image-20210926204622261" loading="lazy"></p><p>\u9488\u5BF9\u4EE5\u4E0A\u4EE3\u7801\uFF0C\u5982\u679C\u518D\u65B0\u521B\u5EFA\u4E00\u4E2ASqlSession,\u53EBsqlSession2,\u5728\u7B2C\u4E00\u6B21\u548C\u7B2C\u4E8C\u6B21\u67E5\u8BE2\u7684\u4E2D\u95F4\u7528sqlSession2\u53BB\u5220\u9664\u4E00\u6761\u8BB0\u5F55\uFF0C\u7136\u540E\u518D\u67E5\u8BE2\uFF0C\u8FD9\u65F6\u7B2C\u4E8C\u67E5\u8BE2\u7684\u6570\u636E\u662F\u7B2C\u4E00\u6B21\u7F13\u5B58\u7684\uFF0C\u8FD9\u5C31\u5BFC\u81F4\u4E86\u7B2C\u4E8C\u6B21\u67E5\u8BE2\u7ED3\u679C\u4E0D\u51C6\u786E\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>	 <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pageQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> resource <span class="token operator">=</span> <span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sqlSession<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">RowBounds</span> rowBounds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RowBounds</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Order</span><span class="token punctuation">&gt;</span></span> orders <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span><span class="token string">&quot;com.chen.mapper.OrderMapper.pageQuery&quot;</span><span class="token punctuation">,</span> rowBounds<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>orders<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSession</span> sqlSession2 <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sqlSession2<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">&quot;com.chen.mapper.OrderMapper.deleteOne&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sqlSession2<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Order</span><span class="token punctuation">&gt;</span></span> orders1 <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span><span class="token string">&quot;com.chen.mapper.OrderMapper.pageQuery&quot;</span><span class="token punctuation">,</span> rowBounds<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>orders1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sqlSession2<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5220\u9664\u540E\uFF0C\u7B2C\u4E8C\u6B21\u67E5\u8BE2\u7684\u7ED3\u679C\u5E94\u8BE5\u6BD4\u7B2C\u4E00\u6B21\u5C11\u4E00\u4E2A\uFF0C\u4F46\u662F\u5B9E\u9645\u53BB\u5374\u6CA1\u5C11\uFF0C\u5982\u4E0B\u56FE</p><p><img src="https://afatpig.oss-cn-chengdu.aliyuncs.com/blog/image-20210926205004963-16326606075292.png" alt="image-20210926205004963" loading="lazy"></p><p>\u5728\u5B9E\u9645\u9879\u76EE\u4E2DSqlSession \u5E76\u6CA1\u6709\u592A\u5927\u4F5C\u7528\uFF0C\u663E\u5F97\u5F88\u9E21\u808B\uFF0C\u6D4B\u8BD5\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>		sysHospitalService<span class="token punctuation">.</span><span class="token function">selectByDeptId</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		sysHospitalService<span class="token punctuation">.</span><span class="token function">selectByDeptId</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728\u6D4B\u8BD5\u65B9\u6CD5\u4E2D\u8C03\u7528\u540C\u4E00\u4E2A\u67E5\u8BE2\u4E24\u6B21\uFF0C\u65E5\u5FD7\u5982\u4E0B\uFF0C\u4F1A\u53D1\u73B0\u521B\u5EFA\u4E86\u4E24\u4E2Asqlsession,\u7B2C1\u884C\u548C\u7B2C18\u884C\uFF0C<code>SELECT * FROM sys_hospital </code> \u6267\u884C\u4E86\u4E24\u6B21\u3002\u6240\u4EE5\u5B9E\u9645\u9879\u76EE\u4E00\u822C\u4E0D\u4F1A\u4F7F\u7528\u540C\u4E00\u4E2Asqlsession\u53BB\u67E5\u4E24\u6B21\uFF0C\u6240\u4EE5\u4E00\u7EA7\u7F13\u5B58\u5176\u5B9E\u5E76\u6CA1\u6709\u4EC0\u4E48\u5375\u7528\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1346a6fe] was not registered for synchronization because synchronization is not active
JDBC Connection [com.alibaba.druid.proxy.jdbc.ConnectionProxyImpl@30e3042] will not be managed by Spring
Original SQL: SELECT  *  FROM sys_hospital 
 
 WHERE (dept_id = ?)
parser sql: SELECT * FROM sys_hospital WHERE (dept_id = ?) AND tenant_id = 1
==&gt;  Preparing: SELECT * FROM sys_hospital WHERE (dept_id = ?) AND tenant_id = 1 
==&gt; Parameters: 1(Integer)
&lt;==    Columns: id, uuid, encoded, hospital_name, address, status, contact, contact_position, contact_tel, contact_mail, hospital_remark, country, provinces, city, county, install_quantity, info_sources, rating, hospital_rating, hospital_nature, nature, hospital_bed_num, doctors_num, daily_inspect_num, in_hospital_position, in_hospital_use_way, competitors, kol, hospital_photo, last_follow_date, create_date, modify_date, dept_id, created_id, tenant_id, hospital_type, belong_area, belong_office, endoscope_window, ultrasound_window, inspection_window, vip_customer_level, country_name, provinces_name, city_name, level, hospital_level, sono_tag, vip_level, contact_json
&lt;==        Row: 20038, f050a176-a569-49bb-a422-f705fde468b3, null, \u6D4B\u8BD5, \u662F, null, 22, null, \u6240\u5C5E, 4335@111.com, \u55EF\u55EF, 7, 247, 3022, null, null, null, null, 1, null, 1, 0, 0, 0, null, null, null, 0, 8004, null, 2021-03-03 16:40:34, 2021-03-03 16:40:46, 1, 1, 1, null, null, null, null, null, null, null, \u4E2D\u56FD, \u5317\u4EAC, \u897F\u57CE, 1, null, null, null, &lt;&lt;BLOB&gt;&gt;
&lt;==        Row: 20039, 3d9faf5e-d4b5-4fdf-a0c2-af9069eb1f9a, null, test hospital, Russia, null, Gordon, null, +7 5542 214 111, u@sonsocape.net, , 7, 250, 3069, null, null, null, null, 1, null, 1, 0, 0, 0, null, null, null, 0, , null, 2021-03-03 19:04:09, 2021-03-03 19:04:20, 1, 1, 1, null, null, null, null, null, null, null, \u4E2D\u56FD, \u5C71\u897F, \u6714\u5DDE, 1, null, null, null, &lt;&lt;BLOB&gt;&gt;
&lt;==        Row: 20040, 6e35f8e1-a941-4879-852d-ed1f8a5d76cd, null, hghjbg, 6757667, null, \u7A7A\u95F4\u73AF\u5883\u5F00\u4F1A\u3001\u3011, null, 9098989, hjjh@ff.net, , 7, 247, 3021, null, null, null, null, 1, null, 4, 0, 0, 0, null, null, null, 1, , null, 2021-03-04 11:54:12, 2021-03-04 11:55:37, 1, 1, 1, null, null, null, null, null, null, null, \u4E2D\u56FD, \u5317\u4EAC, \u4E1C\u57CE, 1, null, null, null, &lt;&lt;BLOB&gt;&gt;
&lt;==        Row: 21165, a0cc7326-0a94-4fd9-a469-dac4994c9bbf, null, test2, aaaaaz, null, test, null, 123456, 123456@qq.com, , 7, 247, 3021, null, null, null, null, 1, null, null, 0, 0, 0, null, null, null, 0, , null, 2021-07-01 15:22:29, 2021-07-01 15:22:32, 1, 329, 1, null, null, null, null, null, null, null, \u4E2D\u56FD, \u5317\u4EAC, \u4E1C\u57CE, 1, null, null, null, &lt;&lt;BLOB&gt;&gt;
&lt;==        Row: 21669, 577dada6-be56-45a9-a892-80fe600cd197, null, Abu el Rish - El Monira, Cairo, null, Ayman Email, null, +2 23654494, abo.bakr@misrsinai.org, , 17, 501, 6404, null, null, null, null, 15, null, 1, 300, 300, 0, null, null, null, 0, , null, 2021-09-02 17:57:13, 2021-09-05 17:49:58, 1, 433, 1, null, null, null, null, null, null, null, Egypt, Cairo, Cairo, 1, null, null, null, &lt;&lt;BLOB&gt;&gt;
&lt;==      Total: 5
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1346a6fe]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@82f93f6] was not registered for synchronization because synchronization is not active
JDBC Connection [com.alibaba.druid.proxy.jdbc.ConnectionProxyImpl@30e3042] will not be managed by Spring
Original SQL: SELECT  *  FROM sys_hospital 
 
 WHERE (dept_id = ?)
parser sql: SELECT * FROM sys_hospital WHERE (dept_id = ?) AND tenant_id = 1
==&gt;  Preparing: SELECT * FROM sys_hospital WHERE (dept_id = ?) AND tenant_id = 1 
==&gt; Parameters: 1(Integer)
&lt;==    Columns: id, uuid, encoded, hospital_name, address, status, contact, contact_position, contact_tel, contact_mail, hospital_remark, country, provinces, city, county, install_quantity, info_sources, rating, hospital_rating, hospital_nature, nature, hospital_bed_num, doctors_num, daily_inspect_num, in_hospital_position, in_hospital_use_way, competitors, kol, hospital_photo, last_follow_date, create_date, modify_date, dept_id, created_id, tenant_id, hospital_type, belong_area, belong_office, endoscope_window, ultrasound_window, inspection_window, vip_customer_level, country_name, provinces_name, city_name, level, hospital_level, sono_tag, vip_level, contact_json
&lt;==        Row: 20038, f050a176-a569-49bb-a422-f705fde468b3, null, \u6D4B\u8BD5, \u662F, null, 22, null, \u6240\u5C5E, 4335@111.com, \u55EF\u55EF, 7, 247, 3022, null, null, null, null, 1, null, 1, 0, 0, 0, null, null, null, 0, 8004, null, 2021-03-03 16:40:34, 2021-03-03 16:40:46, 1, 1, 1, null, null, null, null, null, null, null, \u4E2D\u56FD, \u5317\u4EAC, \u897F\u57CE, 1, null, null, null, &lt;&lt;BLOB&gt;&gt;
&lt;==        Row: 20039, 3d9faf5e-d4b5-4fdf-a0c2-af9069eb1f9a, null, test hospital, Russia, null, Gordon, null, +7 5542 214 111, u@sonsocape.net, , 7, 250, 3069, null, null, null, null, 1, null, 1, 0, 0, 0, null, null, null, 0, , null, 2021-03-03 19:04:09, 2021-03-03 19:04:20, 1, 1, 1, null, null, null, null, null, null, null, \u4E2D\u56FD, \u5C71\u897F, \u6714\u5DDE, 1, null, null, null, &lt;&lt;BLOB&gt;&gt;
&lt;==        Row: 20040, 6e35f8e1-a941-4879-852d-ed1f8a5d76cd, null, hghjbg, 6757667, null, \u7A7A\u95F4\u73AF\u5883\u5F00\u4F1A\u3001\u3011, null, 9098989, hjjh@ff.net, , 7, 247, 3021, null, null, null, null, 1, null, 4, 0, 0, 0, null, null, null, 1, , null, 2021-03-04 11:54:12, 2021-03-04 11:55:37, 1, 1, 1, null, null, null, null, null, null, null, \u4E2D\u56FD, \u5317\u4EAC, \u4E1C\u57CE, 1, null, null, null, &lt;&lt;BLOB&gt;&gt;
&lt;==        Row: 21165, a0cc7326-0a94-4fd9-a469-dac4994c9bbf, null, test2, aaaaaz, null, test, null, 123456, 123456@qq.com, , 7, 247, 3021, null, null, null, null, 1, null, null, 0, 0, 0, null, null, null, 0, , null, 2021-07-01 15:22:29, 2021-07-01 15:22:32, 1, 329, 1, null, null, null, null, null, null, null, \u4E2D\u56FD, \u5317\u4EAC, \u4E1C\u57CE, 1, null, null, null, &lt;&lt;BLOB&gt;&gt;
&lt;==        Row: 21669, 577dada6-be56-45a9-a892-80fe600cd197, null, Abu el Rish - El Monira, Cairo, null, Ayman Email, null, +2 23654494, abo.bakr@misrsinai.org, , 17, 501, 6404, null, null, null, null, 15, null, 1, 300, 300, 0, null, null, null, 0, , null, 2021-09-02 17:57:13, 2021-09-05 17:49:58, 1, 433, 1, null, null, null, null, null, null, null, Egypt, Cairo, Cairo, 1, null, null, null, &lt;&lt;BLOB&gt;&gt;
&lt;==      Total: 5
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@82f93f6]

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2\u3001mybatis-plus\u6269\u5C55\u81EA\u5B9A\u4E49\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#_2\u3001mybatis-plus\u6269\u5C55\u81EA\u5B9A\u4E49\u67E5\u8BE2" aria-hidden="true">#</a> 2\u3001mybatis-plus\u6269\u5C55\u81EA\u5B9A\u4E49\u67E5\u8BE2</h4>`,26),b={href:"https://cloud.tencent.com/developer/article/1639915",target:"_blank",rel:"noopener noreferrer"},g=s("mybatis\u81EA\u5B9A\u4E49sql\u67E5\u8BE2\u65B9\u6CD5"),S={href:"https://blog.csdn.net/weixin_39494923/article/details/91534658/",target:"_blank",rel:"noopener noreferrer"},f=s("mybatis\u63D2\u4EF6\u4E4B\u62E6\u622A\u5668"),y=p(`<h5 id="_2-1-\u80CC\u666F" tabindex="-1"><a class="header-anchor" href="#_2-1-\u80CC\u666F" aria-hidden="true">#</a> 2.1 \u80CC\u666F</h5><p>pig\u9879\u76EE\u4E2D\u6709\u4E2A<code>serviceStockInstallRecordMapper.selectListByScope(queryWrapper.orderByDesc(&quot;create_time&quot;), new DataScope());</code>\u65B9\u6CD5\uFF0CselectListByScope\u6B64\u65B9\u6CD5\u662F\u4E00\u4E2A\u63A5\u53E3\u65B9\u6CD5\uFF0C\u5E76\u4E14\u8FD9\u662F\u4E00\u4E2A\u81EA\u5B9A\u4E49\u7684\u65B9\u6CD5\uFF0CMybatis\u548CMybatis-plus\u6CA1\u6709\u5BF9\u5176\u8FDB\u884C\u5B9E\u73B0\uFF0C\u6240\u4EE5\u5C31\u63A2\u7A76\u4E00\u4E0B\u8FD9\u4E2A\u65B9\u6CD5\u662F\u5982\u4F55\u6267\u884C\u7684\u3002</p><h5 id="_2-2-\u7814\u7A76\u601D\u8DEF" tabindex="-1"><a class="header-anchor" href="#_2-2-\u7814\u7A76\u601D\u8DEF" aria-hidden="true">#</a> 2.2 \u7814\u7A76\u601D\u8DEF</h5><ol><li>\u6839\u636E\u53C2\u6570\u53CD\u67E5</li></ol><p>\u65B9\u6CD5\u53C2\u6570\u4E2D\u6709\u4E2ADataScope\uFF0C\u987E\u540D\u601D\u4E49\u8FD9\u662F\u6839\u636E\u6743\u9650\u67E5\u8BE2\u6570\u636E\u8303\u56F4\uFF0C\u67E5\u770B\u4E00\u4E0B\u6E90\u7801\uFF0C\u662F\u4E00\u4E2AMap\u7C7B\u578B\uFF0C\u53EF\u4EE5\u770B\u5230\u6709\u90E8\u95E8id,\u533B\u9662id,\u521B\u5EFA\u4EBAid\u7B49\u4E00\u4E9B\u9650\u5236\u67E5\u8BE2\u8303\u56F4\u7684\u5B57\u6BB5\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@EqualsAndHashCode</span><span class="token punctuation">(</span>callSuper <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DataScope</span> <span class="token keyword">extends</span> <span class="token class-name">HashMap</span> <span class="token punctuation">{</span>

	<span class="token doc-comment comment">/**
	 * \u9650\u5236\u8303\u56F4\u7684\u5B57\u6BB5\u540D\u79F0
	 */</span>
	<span class="token keyword">private</span> <span class="token class-name">String</span> scopeName <span class="token operator">=</span> <span class="token string">&quot;dept_id&quot;</span><span class="token punctuation">;</span>

	<span class="token doc-comment comment">/**
	 * \u9650\u5236\u8303\u56F4\u7684\u5B57\u6BB5\u540D\u79F0
	 */</span>
	<span class="token keyword">private</span> <span class="token class-name">String</span> scopeName_1 <span class="token operator">=</span> <span class="token string">&quot;hospital_id&quot;</span><span class="token punctuation">;</span>


    <span class="token comment">/* \u6570\u636E\u521B\u5EFA\u7528\u6237id */</span>
	<span class="token keyword">private</span> <span class="token class-name">String</span> createId <span class="token operator">=</span> <span class="token string">&quot;created_id&quot;</span><span class="token punctuation">;</span>

	<span class="token doc-comment comment">/**
	 * \u5177\u4F53\u7684\u6570\u636E\u8303\u56F4
	 */</span>
	<span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> deptIds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token doc-comment comment">/**
	 * \u5177\u4F53\u7684\u533B\u9662\u6570\u636E\u8303\u56F4
	 */</span>
	<span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> hospitalIds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token doc-comment comment">/**
	 * \u662F\u5426\u53EA\u67E5\u8BE2\u672C\u90E8\u95E8
	 */</span>
	<span class="token keyword">private</span> <span class="token class-name">Boolean</span> isOnly <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

	<span class="token doc-comment comment">/**
	 * \u51FD\u6570\u540D\u79F0\uFF0C\u9ED8\u8BA4 SELECT * ;
	 *
	 * <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
	 * <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>COUNT(1)<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
	 * <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
	 */</span>
	<span class="token keyword">private</span> <span class="token class-name">DataScopeFuncEnum</span> func <span class="token operator">=</span> <span class="token class-name">DataScopeFuncEnum</span><span class="token punctuation">.</span>ALL<span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><p>\u5229\u7528idea\u7684\u68C0\u7D22\u5FEB\u6377\u952E\uFF08Alt+F7\uFF09\u67E5\u627EDataScope\u8C03\u7528\u60C5\u51B5</p><p>\u5F88\u5BB9\u6613\u5C31\u5B9A\u4F4D\u5230<code>DataScopeInterceptor</code>\u8FD9\u4E2A\u7C7B\u4E2D\u4F7F\u7528\u5230\u4E86<code>DataScope</code></p><p><img src="https://afatpig.oss-cn-chengdu.aliyuncs.com/blog/image-20211220114833903-16399721171081.png" alt="image-20211220114833903" loading="lazy"></p></li></ol><p>\u6838\u5FC3\u4EE3\u7801\u662F\u91CD\u5199\u4E86Interceptor\u7684intercept\u65B9\u6CD5\uFF0C\u5728\u6B64\u65B9\u6CD5\u4E2D#18\u884C\u8C03\u7528\u4E86\u4E00\u4E2AfindDataScopeObject\u65B9\u6CD5\uFF0C\u6B64\u65B9\u6CD5\u5148\u5224\u65AD\u67E5\u627E\u53C2\u6570\u662F\u6709\u6709\u4E2ADataScope\u5BF9\u8C61\uFF0C\u5982\u679C\u6CA1\u6709\uFF0C\u5219\u76F4\u63A5\u8FDB\u884C\u666E\u901A\u7684sql\u67E5\u8BE2\uFF0C\u5982\u679C\u6709\u5219\u9700\u8981\u6839\u636EDataScope\u6765\u9650\u5236\u67E5\u8BE2\u6570\u636E\u7684\u8303\u56F4\uFF0C#36\u884C\u8C03\u7528calcScope\u8BA1\u7B97\u5F53\u524D\u8BF7\u6C42\u7528\u6237\u6240\u62E5\u6709\u7684\u5177\u4F53\u6743\u9650</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//com.sonoscape.ccs.common.data.datascope.DataScopeInterceptor#intercept</span>

<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">intercept</span><span class="token punctuation">(</span><span class="token class-name">Invocation</span> invocation<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">StatementHandler</span> statementHandler <span class="token operator">=</span> <span class="token class-name">PluginUtils</span><span class="token punctuation">.</span><span class="token function">realTarget</span><span class="token punctuation">(</span>invocation<span class="token punctuation">.</span><span class="token function">getTarget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">MetaObject</span> metaObject <span class="token operator">=</span> <span class="token class-name">SystemMetaObject</span><span class="token punctuation">.</span><span class="token function">forObject</span><span class="token punctuation">(</span>statementHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">sqlParser</span><span class="token punctuation">(</span>metaObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// \u5148\u5224\u65AD\u662F\u4E0D\u662FSELECT\u64CD\u4F5C</span>
		<span class="token class-name">MappedStatement</span> mappedStatement <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">MappedStatement</span><span class="token punctuation">)</span> metaObject<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token string">&quot;delegate.mappedStatement&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">SqlCommandType</span><span class="token punctuation">.</span>SELECT<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>mappedStatement<span class="token punctuation">.</span><span class="token function">getSqlCommandType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> invocation<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token class-name">BoundSql</span> boundSql <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">BoundSql</span><span class="token punctuation">)</span> metaObject<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token string">&quot;delegate.boundSql&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> originalSql <span class="token operator">=</span> boundSql<span class="token punctuation">.</span><span class="token function">getSql</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">Object</span> parameterObject <span class="token operator">=</span> boundSql<span class="token punctuation">.</span><span class="token function">getParameterObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// \u67E5\u627E\u53C2\u6570\u4E2D\u5305\u542BDataScope\u7C7B\u578B\u7684\u53C2\u6570</span>
		<span class="token class-name">DataScope</span> dataScope <span class="token operator">=</span> <span class="token function">findDataScopeObject</span><span class="token punctuation">(</span>parameterObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>dataScope <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> invocation<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token class-name">String</span> deptScope <span class="token operator">=</span> dataScope<span class="token punctuation">.</span><span class="token function">getScopeName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> hospitalScope <span class="token operator">=</span> dataScope<span class="token punctuation">.</span><span class="token function">getScopeName_1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> createId <span class="token operator">=</span> dataScope<span class="token punctuation">.</span><span class="token function">getCreateId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token class-name">String</span> funcType <span class="token operator">=</span> dataScope<span class="token punctuation">.</span><span class="token function">getFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// \u5728sevice\u65B9\u6CD5\u4E2D\u7528datascope\u67E5\u8BE2\u65F6\uFF0C</span>
		<span class="token comment">// 1\u3001\u4E0D\u8BBE\u7F6Edept\u3001created_id\u3001hospital_Id\u96C6\u5408\u503C\uFF0C</span>
		<span class="token comment">// 2\u3001\u4ECE\u89D2\u8272\u914D\u7F6E\u7684\u6570\u636E\u6743\u9650\u83B7\u53D6dept_ids,</span>
		<span class="token comment">// 3\u3001\u4ECE\u7528\u6237\u83B7\u53D6\u5173\u8054\u7684hospital_ids \u4E0Ecreated_id</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> deptIds <span class="token operator">=</span> dataScope<span class="token punctuation">.</span><span class="token function">getDeptIds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> userIds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> hospitalIds <span class="token operator">=</span> dataScope<span class="token punctuation">.</span><span class="token function">getHospitalIds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// \u4ECE\u89D2\u8272\u6743\u9650\u914D\u7F6E\u5904\uFF0C\u4F18\u5148\u83B7\u53D6\u8D4B\u503C\u6570\u636E</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">CollUtil</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>deptIds<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> dataScopeHandle<span class="token punctuation">.</span><span class="token function">calcScope</span><span class="token punctuation">(</span>deptIds<span class="token punctuation">,</span>userIds<span class="token punctuation">,</span>hospitalIds<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token keyword">return</span> invocation<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token class-name">String</span> hospitalJoin <span class="token operator">=</span> <span class="token class-name">CollectionUtil</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>hospitalIds<span class="token punctuation">,</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>deptIds<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token keyword">if</span><span class="token punctuation">(</span>hospitalIds<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token comment">// 1 \u4EE3\u7406\u5546\u4E3A\u7A7A\uFF0C\u533B\u9662\u5217\u8868\u4E3A\u7A7A</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>userIds<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">// 1.1\u3001\u6CA1\u6709\u4EE3\u7406\u5546\u3001\u533B\u9662\u3001userIds\u96C6\u5408\u4E3A\u7A7A\uFF0C\u5219\u8BBF\u95EE\u6240\u6709data\u6743\u9650</span>
					originalSql <span class="token operator">=</span> <span class="token function">getOriginSql</span><span class="token punctuation">(</span>funcType<span class="token punctuation">,</span> originalSql<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
					<span class="token comment">// 1.2\u3001 \u6CA1\u6709\u4EE3\u7406\u5546\u3001\u533B\u9662\uFF0C userIds\u96C6\u5408\u4E0D\u4E3A\u7A7A, \u5E76\u4E14originalSql\u5305\u542Bcreated_id\u5B57\u6BB5</span>
					<span class="token keyword">if</span><span class="token punctuation">(</span>originalSql<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>createId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

						originalSql <span class="token operator">=</span> <span class="token function">getUserCreatedDataSql</span><span class="token punctuation">(</span>funcType<span class="token punctuation">,</span> originalSql<span class="token punctuation">,</span> createId<span class="token punctuation">,</span> userIds<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>

						<span class="token comment">//1.3\u3001 \u6CA1\u6709\u4EE3\u7406\u5546\u3001\u533B\u9662\uFF0C userIds\u96C6\u5408\u4E0D\u4E3A\u7A7A, \u4F46originalSql\u4E0D\u5305\u542Bcreated_id\u5B57\u6BB5\uFF0C\u5219\u8BBF\u95EE\u6240\u6709data\u6743\u9650</span>
						originalSql <span class="token operator">=</span> <span class="token function">getOriginSql</span><span class="token punctuation">(</span>funcType<span class="token punctuation">,</span> originalSql<span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token punctuation">}</span>

				<span class="token punctuation">}</span>

			<span class="token punctuation">}</span>

			<span class="token keyword">else</span><span class="token punctuation">{</span>
				<span class="token comment">//2 \u4EE3\u7406\u5546\u4E3A\u7A7A\uFF0C\u533B\u9662\u5217\u8868\u4E0D\u4E3A\u7A7A, userIds\u96C6\u5408\u4E3A\u7A7A</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>userIds<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">// \u6CA1\u6709\u4EE3\u7406\u5546\uFF0C\u5B58\u5728\u533B\u9662\u5217\u8868\uFF0CuserIds\u96C6\u5408\u4E3A\u7A7A, \u5224\u65ADoriginalSql\u662F\u5426\u5B58\u5728hospital_id \u5B57\u6BB5:</span>

					<span class="token comment">// 2.1\u3001\u5B58\u5728hospital_id \u5B57\u6BB5, \u5219\u8868\u793A\u53EA\u67E5\u8BE2\u7ED1\u5B9A\u533B\u9662\u6743\u9650\u4E0B\u6570\u636E</span>
					<span class="token keyword">if</span><span class="token punctuation">(</span>originalSql<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>hospitalScope<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

						originalSql <span class="token operator">=</span> <span class="token function">getDeptScopeOrHospitalScopeSql</span><span class="token punctuation">(</span>funcType<span class="token punctuation">,</span> originalSql<span class="token punctuation">,</span> hospitalScope<span class="token punctuation">,</span> hospitalJoin<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
						<span class="token comment">// 2.2\u3001 \u4E0D\u5B58\u5728hospital_id \u5B57\u6BB5,\u5219\u8868\u793A\u67E5\u8BE2\u6240\u6709\u6570\u636E</span>
						originalSql <span class="token operator">=</span> <span class="token function">getOriginSql</span><span class="token punctuation">(</span>funcType<span class="token punctuation">,</span> originalSql<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

				<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
				 <span class="token comment">//3 \u4EE3\u7406\u5546\u4E3A\u7A7A\uFF0C\u533B\u9662\u5217\u8868\u4E0D\u4E3A\u7A7A, userIds\u96C6\u5408\u4E0D\u4E3A\u7A7A</span>

					<span class="token keyword">if</span><span class="token punctuation">(</span>originalSql<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>hospitalScope<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>originalSql<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>createId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token comment">// 3.1\u3001 originalSql\u4E2D\u5B58\u5728hospital_id\u3001created_id</span>
						originalSql <span class="token operator">=</span> <span class="token function">getDeptUserOrHospitalUserSql</span><span class="token punctuation">(</span>funcType<span class="token punctuation">,</span> originalSql<span class="token punctuation">,</span> hospitalScope<span class="token punctuation">,</span> hospitalJoin<span class="token punctuation">,</span> createId<span class="token punctuation">,</span> userIds<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>originalSql<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>hospitalScope<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token comment">// 3.2\u3001 originalSql\u4E2D\u53EA\u5728hospital_id</span>
						originalSql <span class="token operator">=</span> <span class="token function">getDeptScopeOrHospitalScopeSql</span><span class="token punctuation">(</span>funcType<span class="token punctuation">,</span> originalSql<span class="token punctuation">,</span> hospitalScope<span class="token punctuation">,</span> hospitalJoin<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>originalSql<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>createId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token comment">// 3.3\u3001 originalSql\u4E2D\u53EA\u5B58\u5728created_id</span>
						originalSql <span class="token operator">=</span> <span class="token function">getUserCreatedDataSql</span><span class="token punctuation">(</span>funcType<span class="token punctuation">,</span> originalSql<span class="token punctuation">,</span> createId<span class="token punctuation">,</span> userIds<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					<span class="token keyword">else</span><span class="token punctuation">{</span>
						<span class="token comment">// 3.4\u3001 \u4E0D\u5B58\u5728\u5B58\u5728hospital_id\u3001created_id\uFF0C\u5219\u67E5\u8BE2\u6240\u6709\u6570\u636E</span>
						originalSql <span class="token operator">=</span> <span class="token function">getOriginSql</span><span class="token punctuation">(</span>funcType<span class="token punctuation">,</span> originalSql<span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

			<span class="token punctuation">}</span>

		<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
			<span class="token class-name">String</span> deptJoin <span class="token operator">=</span> <span class="token class-name">CollectionUtil</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>deptIds<span class="token punctuation">,</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// 4 \u5B58\u5728\u4EE3\u7406\u5546\uFF0C\u533B\u9662\u5217\u8868\u4E3A\u7A7A</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>hospitalIds<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

				<span class="token keyword">if</span><span class="token punctuation">(</span>userIds<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">// 4.1\u3001\u5B58\u5728\u4EE3\u7406\u5546\uFF0C\u533B\u9662\u5217\u8868\u4E3A\u7A7A, userIds\u96C6\u5408\u4E3A\u7A7A\uFF0C\u5219\u67E5\u8BE2\u6240\u6709\u4EE3\u7406\u5546\u6570\u636E</span>
					originalSql <span class="token operator">=</span> <span class="token function">getDeptScopeOrHospitalScopeSql</span><span class="token punctuation">(</span>funcType<span class="token punctuation">,</span> originalSql<span class="token punctuation">,</span> deptScope<span class="token punctuation">,</span> deptJoin<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
					<span class="token comment">// 4.2\u3001\u5B58\u5728\u4EE3\u7406\u5546\uFF0C\u533B\u9662\u5217\u8868\u4E3A\u7A7A\uFF0C userIds\u96C6\u5408\u4E0D\u4E3A\u7A7A, \u5E76\u4E14originalSql\u5305\u542Bcreated_id\u5B57\u6BB5</span>
					<span class="token keyword">if</span><span class="token punctuation">(</span>originalSql<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>createId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

						originalSql <span class="token operator">=</span> <span class="token function">getDeptUserOrHospitalUserSql</span><span class="token punctuation">(</span>funcType<span class="token punctuation">,</span> originalSql<span class="token punctuation">,</span> deptScope<span class="token punctuation">,</span> deptJoin<span class="token punctuation">,</span> createId<span class="token punctuation">,</span> userIds<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
						<span class="token comment">//4.3\u3001 \u5B58\u5728\u4EE3\u7406\u5546\uFF0C\u533B\u9662\u5217\u8868\u4E3A\u7A7A\uFF0C userIds\u96C6\u5408\u4E0D\u4E3A\u7A7A, \u4F46originalSql\u4E0D\u5305\u542Bcreated_id\u5B57\u6BB5\uFF0C\u5219\u8BBF\u95EE\u6240\u6709\u4EE3\u7406\u5546\u6570\u636E</span>
						originalSql <span class="token operator">=</span> <span class="token function">getDeptScopeOrHospitalScopeSql</span><span class="token punctuation">(</span>funcType<span class="token punctuation">,</span> originalSql<span class="token punctuation">,</span> deptScope<span class="token punctuation">,</span> deptJoin<span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token punctuation">}</span>

				<span class="token punctuation">}</span>

			<span class="token punctuation">}</span>
			<span class="token keyword">else</span><span class="token punctuation">{</span>
				<span class="token comment">//5 \u5B58\u5728\u4EE3\u7406\u5546\uFF0C\u533B\u9662\u5217\u8868\u4E0D\u4E3A\u7A7A, userIds\u96C6\u5408\u4E3A\u7A7A,</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>userIds<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">// \u5224\u65ADoriginalSql\u662F\u5426\u5B58\u5728hospital_id \u5B57\u6BB5:</span>
					<span class="token comment">// 5.1  originalSql \u5B58\u5728hospital_id \u5B57\u6BB5, \u5219\u8868\u793A\u67E5\u8BE2\u4EE3\u7406\u5546\u5C42\u7EA7\u4E0E\u533B\u9662\u5217\u8868\u6570\u636E</span>
					<span class="token keyword">if</span><span class="token punctuation">(</span>originalSql<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>hospitalScope<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

						originalSql <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;SELECT %s FROM (%s) temp_data_scope WHERE 1=1 and temp_data_scope.%s IN (%s) or temp_data_scope.%s IN (%s)&quot;</span><span class="token punctuation">,</span>
								dataScope<span class="token punctuation">.</span><span class="token function">getFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> originalSql<span class="token punctuation">,</span> deptScope<span class="token punctuation">,</span> deptJoin<span class="token punctuation">,</span> hospitalScope<span class="token punctuation">,</span> hospitalJoin<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
						<span class="token comment">// 5.2\u3001 originalSql \u4E0D\u5B58\u5728hospital_id \u5B57\u6BB5, \u5219\u8868\u793A\u67E5\u8BE2\u6240\u6709\u4EE3\u7406\u5546\u6570\u636E</span>
						originalSql <span class="token operator">=</span>  <span class="token function">getDeptScopeOrHospitalScopeSql</span><span class="token punctuation">(</span>funcType<span class="token punctuation">,</span> originalSql<span class="token punctuation">,</span> deptScope<span class="token punctuation">,</span> deptJoin<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

				<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
				<span class="token comment">//6 \u5B58\u5728\u4EE3\u7406\u5546\uFF0C\u533B\u9662\u5217\u8868\u4E0D\u4E3A\u7A7A\uFF0CuserIds\u96C6\u5408\u4E0D\u4E3A\u7A7A</span>
					<span class="token keyword">if</span><span class="token punctuation">(</span>originalSql<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>hospitalScope<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>originalSql<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>createId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token comment">// 6.1\u3001 originalSql\u4E2D\u5B58\u5728hospital_id\u3001created_id</span>
						originalSql <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;SELECT %s FROM (%s) temp_data_scope WHERE 1=1 and temp_data_scope.%s IN (%s) or temp_data_scope.%s IN (%s) or temp_data_scope.%s = %s&quot;</span><span class="token punctuation">,</span>
								dataScope<span class="token punctuation">.</span><span class="token function">getFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> originalSql<span class="token punctuation">,</span> deptScope<span class="token punctuation">,</span> deptJoin<span class="token punctuation">,</span> hospitalScope<span class="token punctuation">,</span> hospitalJoin<span class="token punctuation">,</span>createId<span class="token punctuation">,</span>userIds<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>originalSql<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>hospitalScope<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token comment">// 6.2\u3001 originalSql\u4E2D\u53EA\u5728hospital_id</span>
						originalSql <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;SELECT %s FROM (%s) temp_data_scope WHERE 1=1 and temp_data_scope.%s IN (%s) or temp_data_scope.%s IN (%s)&quot;</span><span class="token punctuation">,</span>
								dataScope<span class="token punctuation">.</span><span class="token function">getFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> originalSql<span class="token punctuation">,</span> deptScope<span class="token punctuation">,</span> deptJoin<span class="token punctuation">,</span> hospitalScope<span class="token punctuation">,</span> hospitalJoin<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>originalSql<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>createId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token comment">// 6.3\u3001 originalSql\u4E2D\u53EA\u5B58\u5728created_id</span>
						originalSql <span class="token operator">=</span> <span class="token function">getDeptUserOrHospitalUserSql</span><span class="token punctuation">(</span>funcType<span class="token punctuation">,</span> originalSql<span class="token punctuation">,</span> deptScope<span class="token punctuation">,</span> deptJoin<span class="token punctuation">,</span> createId<span class="token punctuation">,</span> userIds<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					<span class="token keyword">else</span><span class="token punctuation">{</span>
						<span class="token comment">// 6.4\u3001 \u4E0D\u5B58\u5728\u5B58\u5728hospital_id\u3001created_id\uFF0C\u5219\u53EA\u67E5\u8BE2\u4EE3\u7406\u5546\u6570\u636E</span>
						originalSql <span class="token operator">=</span>  <span class="token function">getDeptScopeOrHospitalScopeSql</span><span class="token punctuation">(</span>funcType<span class="token punctuation">,</span> originalSql<span class="token punctuation">,</span> deptScope<span class="token punctuation">,</span> deptJoin<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

			<span class="token punctuation">}</span>


		<span class="token punctuation">}</span>

		metaObject<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token string">&quot;delegate.boundSql.sql&quot;</span><span class="token punctuation">,</span> originalSql<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> invocation<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u200B \u67E5\u770B<code>calcScope</code>\u6E90\u7801\uFF0C\u53EF\u4EE5\u770B\u5230\u5148\u83B7\u53D6security\u4E2D\u7684\u7528\u6237\uFF0C\u81EA\u7136\u5C31\u53EF\u4EE5\u5F97\u5230\u7528\u6237\u7684\u5BF9\u5E94\u7684\u89D2\u8272\u6743\u9650\uFF0C\u7136\u540E\u628A\u5BF9\u5E94\u6743\u9650\u8BBE\u7F6E\u5230\u96C6\u5408deptList\u3001userIds\u3001hospitalList\u4E2D\uFF0C\u67E5\u8BE2\u5728<code>com.sonoscape.ccs.common.data.datascope.DataScopeInterceptor#intercept</code>\u4F1A\u89E6\u53D1\u8FC7\u6EE4</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//com.sonoscape.ccs.common.data.datascope.CcsDefaultDatascopeHandle#calcScope</span>

    	<span class="token keyword">public</span> <span class="token class-name">Boolean</span> <span class="token function">calcScope</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> deptList<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> userIds<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> hospitalList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">CcsUser</span> user <span class="token operator">=</span> <span class="token class-name">SecurityUtils</span><span class="token punctuation">.</span><span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> roleIdList <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">getAuthorities</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">GrantedAuthority</span><span class="token operator">::</span><span class="token function">getAuthority</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>authority <span class="token operator">-&gt;</span> authority<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token class-name">SecurityConstants</span><span class="token punctuation">.</span>ROLE<span class="token punctuation">)</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>authority <span class="token operator">-&gt;</span> authority<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token class-name">StrUtil</span><span class="token punctuation">.</span>UNDERLINE<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// \u5F53\u524D\u7528\u6237\u7684\u89D2\u8272\u4E3A\u7A7A</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">CollectionUtil</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>roleIdList<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token class-name">SysRole</span> role <span class="token operator">=</span> dataScopeService<span class="token punctuation">.</span><span class="token function">getRoleList</span><span class="token punctuation">(</span>roleIdList<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token class-name">Comparator</span><span class="token punctuation">.</span><span class="token function">comparingInt</span><span class="token punctuation">(</span><span class="token class-name">SysRole</span><span class="token operator">::</span><span class="token function">getDsType</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// \u89D2\u8272\u6709\u53EF\u80FD\u5DF2\u7ECF\u5220\u9664\u4E86</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>role <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token class-name">Integer</span> dsType <span class="token operator">=</span> role<span class="token punctuation">.</span><span class="token function">getDsType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// \u67E5\u8BE2\u5168\u90E8</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">DataScopeTypeEnum</span><span class="token punctuation">.</span>ALL<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> dsType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
 			<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// \u81EA\u5B9A\u4E49</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">DataScopeTypeEnum</span><span class="token punctuation">.</span>CUSTOM<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> dsType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token class-name">String</span> dsScope <span class="token operator">=</span> role<span class="token punctuation">.</span><span class="token function">getDsScope</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			deptList<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>
					<span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>dsScope<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token class-name">StrUtil</span><span class="token punctuation">.</span>COMMA<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token operator">::</span><span class="token function">parseInt</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//\u8DE8\u90E8\u95E8\u67E5\u8BE2\uFF0C\u4E5F\u8981\u67E5\u8BE2\u4ED6\u81EA\u5DF1</span>
			userIds<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// \u67E5\u8BE2\u672C\u7EA7\u53CA\u5176\u4E0B\u7EA7</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">DataScopeTypeEnum</span><span class="token punctuation">.</span>OWN_CHILD_LEVEL<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> dsType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> deptIdList <span class="token operator">=</span> dataScopeService<span class="token punctuation">.</span><span class="token function">getDescendantList</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getDeptId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">SysDeptRelation</span><span class="token operator">::</span><span class="token function">getDescendant</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			deptList<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>deptIdList<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//\u8DE8\u90E8\u95E8\u67E5\u8BE2\uFF0C\u4E5F\u8981\u67E5\u8BE2\u4ED6\u81EA\u5DF1</span>
			userIds<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// \u53EA\u67E5\u8BE2\u672C\u7EA7</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">DataScopeTypeEnum</span><span class="token punctuation">.</span>OWN_LEVEL<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> dsType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			deptList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getDeptId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//\u8DE8\u90E8\u95E8\u67E5\u8BE2\uFF0C\u4E5F\u8981\u67E5\u8BE2\u4ED6\u81EA\u5DF1</span>
			userIds<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// \u53EA\u67E5\u8BE2\u4E0B\u7EA7\u4E0E\u81EA\u5DF1</span>
		<span class="token comment">// @revised by liubin</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">DataScopeTypeEnum</span><span class="token punctuation">.</span>OWN_ONLY_CHILD_LEVEL<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> dsType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> deptIdList <span class="token operator">=</span> dataScopeService<span class="token punctuation">.</span><span class="token function">getDescendantListNoSelf</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getDeptId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">SysDeptRelation</span><span class="token operator">::</span><span class="token function">getDescendant</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			deptList<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>deptIdList<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//\u67E5\u8BE2\u4E0B\u7EA7\u7684\u540C\u65F6\u67E5\u8BE2\u81EA\u5DF1</span>
			userIds<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token punctuation">}</span>

		<span class="token comment">//\u83B7\u53D6\u5F53\u524D\u7528\u6237\u7ED1\u5B9A\u533B\u9662</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> hospitalIdList <span class="token operator">=</span>  dataScopeService<span class="token punctuation">.</span><span class="token function">getHospitalIdByUserId</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>hospitalIdList <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> hospitalIdList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			hospitalList<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>hospitalIdList<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>


		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_2-3" tabindex="-1"><a class="header-anchor" href="#_2-3" aria-hidden="true">#</a> 2.3</h5><h4 id="_3-mybatis\u4F7F\u7528\u4E2D\u9047\u5230\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#_3-mybatis\u4F7F\u7528\u4E2D\u9047\u5230\u95EE\u9898" aria-hidden="true">#</a> 3. mybatis\u4F7F\u7528\u4E2D\u9047\u5230\u95EE\u9898</h4><h5 id="_3-1" tabindex="-1"><a class="header-anchor" href="#_3-1" aria-hidden="true">#</a> 3.1</h5>`,14);function h(_,q){const a=l("ExternalLinkIcon");return o(),c("div",null,[u,n("p",null,[n("a",k,[d,t(a)])]),n("p",null,[n("a",r,[m,t(a)])]),v,n("p",null,[n("a",b,[g,t(a)])]),n("p",null,[n("a",S,[f,t(a)])]),y])}var L=e(i,[["render",h],["__file","mybatis.html.vue"]]);export{L as default};
