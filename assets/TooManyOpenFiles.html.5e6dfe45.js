import{_ as n}from"./plugin-vue_export-helper.21dcd24c.js";import{o as s,c as a,e}from"./app.9c72b991.js";const i={},c=e(`<h2 id="linux\u670D\u52A1\u5668\u6253\u5F00\u6587\u4EF6\u8FC7\u591A" tabindex="-1"><a class="header-anchor" href="#linux\u670D\u52A1\u5668\u6253\u5F00\u6587\u4EF6\u8FC7\u591A" aria-hidden="true">#</a> Linux\u670D\u52A1\u5668\u6253\u5F00\u6587\u4EF6\u8FC7\u591A</h2><h3 id="\u7EBF\u4E0A\u5F02\u5E38" tabindex="-1"><a class="header-anchor" href="#\u7EBF\u4E0A\u5F02\u5E38" aria-hidden="true">#</a> \u7EBF\u4E0A\u5F02\u5E38</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>java.io.IOException: Too many <span class="token function">open</span> files
        at sun.nio.ch.ServerSocketChannelImpl.accept0<span class="token punctuation">(</span>Native Method<span class="token punctuation">)</span>
        at sun.nio.ch.ServerSocketChannelImpl.accept<span class="token punctuation">(</span>ServerSocketChannelImpl.java:422<span class="token punctuation">)</span>
        at sun.nio.ch.ServerSocketChannelImpl.accept<span class="token punctuation">(</span>ServerSocketChannelImpl.java:250<span class="token punctuation">)</span>
        at org.apache.tomcat.util.net.NioEndpoint.serverSocketAccept<span class="token punctuation">(</span>NioEndpoint.java:446<span class="token punctuation">)</span>
        at org.apache.tomcat.util.net.NioEndpoint.serverSocketAccept<span class="token punctuation">(</span>NioEndpoint.java:70<span class="token punctuation">)</span>
        at org.apache.tomcat.util.net.Acceptor.run<span class="token punctuation">(</span>Acceptor.java:95<span class="token punctuation">)</span>
        at java.lang.Thread.run<span class="token punctuation">(</span>Thread.java:748<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u95EE\u9898\u539F\u56E0\u5206\u6790" tabindex="-1"><a class="header-anchor" href="#\u95EE\u9898\u539F\u56E0\u5206\u6790" aria-hidden="true">#</a> \u95EE\u9898\u539F\u56E0\u5206\u6790</h3><p>Linux\u4E2D\u6BCF\u4E2A\u8FDB\u7A0B\u3001\u6BCF\u4E2A\u7528\u6237\u6253\u5F00\u7684\u6587\u4EF6\u6570\u91CF\u662F\u6709\u9650\u5236\u7684\uFF0C\u67E5\u770B\u6570\u91CF\u9650\u5236\u53EF\u4F7F\u7528<code>ulimit</code>\u547D\u4EE4\uFF0C\u5E38\u4F7F\u7528\u547D\u4EE4\u5982\u4E0B\uFF1A</p><ul><li><code>ulimit -a</code>\uFF1A\u67E5\u770B\u7CFB\u7EDF\u8D44\u6E90\u8BBE\u7F6E</li><li><code>ulimit -n</code>\uFF1A\u67E5\u770B\u7CFB\u7EDF\u540C\u4E00\u65F6\u95F4\u4E00\u4E2A\u8FDB\u7A0B\u6700\u591A\u53EF\u6253\u5F00\u7684\u6587\u4EF6\u6570\u91CF</li><li><code>lsof</code>\uFF1A\u67E5\u770B\u5F53\u524D\u7CFB\u7EDF\u6253\u5F00\u7684\u6240\u6709\u6587\u4EF6</li><li><code>lsof | wc -l</code>\uFF1A \u7EDF\u8BA1\u7CFB\u7EDF\u5DF2\u6253\u5F00\u7684\u6587\u4EF6\u6570</li><li><code>lsof -p &lt;pid&gt;</code>\uFF1A\u67E5\u770B\u67D0\u4E2A\u8FDB\u7A0B\u6253\u5F00\u7684\u6587\u4EF6</li><li><code>lsof -p &lt;pid&gt; | wc -l</code>\uFF1A\u67E5\u770B\u67D0\u4E2A\u8FDB\u7A0B\u6253\u5F00\u7684\u6587\u4EF6\u6570\u91CF</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># root @ sono-bom in /home/sono_bom/logs [18:16:44] </span>
$ <span class="token builtin class-name">ulimit</span> -a
-t: cpu <span class="token function">time</span> <span class="token punctuation">(</span>seconds<span class="token punctuation">)</span>              unlimited
-f: <span class="token function">file</span> size <span class="token punctuation">(</span>blocks<span class="token punctuation">)</span>              unlimited
-d: data seg size <span class="token punctuation">(</span>kbytes<span class="token punctuation">)</span>          unlimited
-s: stack size <span class="token punctuation">(</span>kbytes<span class="token punctuation">)</span>             <span class="token number">8192</span>
-c: core <span class="token function">file</span> size <span class="token punctuation">(</span>blocks<span class="token punctuation">)</span>         <span class="token number">0</span>
-m: resident <span class="token builtin class-name">set</span> size <span class="token punctuation">(</span>kbytes<span class="token punctuation">)</span>      unlimited
-u: processes                       <span class="token number">127964</span>
-n: <span class="token function">file</span> descriptors                <span class="token number">65535</span>
-l: locked-in-memory size <span class="token punctuation">(</span>kbytes<span class="token punctuation">)</span>  <span class="token number">64</span>
-v: address space <span class="token punctuation">(</span>kbytes<span class="token punctuation">)</span>          unlimited
-x: <span class="token function">file</span> locks                      unlimited
-i: pending signals                 <span class="token number">127964</span>
-q: bytes <span class="token keyword">in</span> POSIX msg queues       <span class="token number">819200</span>
-e: max <span class="token function">nice</span>                        <span class="token number">0</span>
-r: max rt priority                 <span class="token number">0</span>
-N <span class="token number">15</span>:                              unlimited
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">ulimit</span> -n
<span class="token number">65535</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6839\u636E<code>ulimit -n</code>\u5F97\u77E5\u7CFB\u7EDF\u8BBE\u7F6E\u7684\u6700\u5927\u6253\u5F00\u6587\u4EF6\u4E3A65535,\u7136\u540E\u901A\u8FC7<code>lsof|wc -l</code>\u53D1\u73B0\uFF0C\u6253\u5F00\u7684\u6587\u4EF6\u5DF2\u7ECF\u8D85\u8FC765535,\u6240\u4EE5\u62A5\u9519<code>Too many files open</code>\u662F\u6B63\u5E38\u7684\u3002 \u63A5\u4E0B\u6765\u4F7F\u7528<code>jps -lv</code>\u67E5\u770B\u62A5\u9519\u7684java\u670D\u52A1\u8FDB\u7A0Bid\uFF0C\u518D\u4F7F\u7528<code>lsof -p &lt;pid&gt;</code>\u67E5\u770B\u6253\u5F00\u7684\u6587\u4EF6\u90FD\u6709\u54EA\u4E9B\uFF0C\u901A\u8FC7\u67E5\u770B\u53D1\u73B0\u6709\u4E00\u4E2A\u6587\u4EF6ip2region.db\u88AB\u6253\u5F00\u51E0\u4E07\u6B21\uFF0C\u7136\u540E \u5230\u4EE3\u7801\u67E5\u627E\u6B64\u6587\u4EF6\u540D\uFF0C\u5B9A\u4F4D\u5230\u4EE3\u7801\uFF0C\u53D1\u73B0\u4E00\u6BB5\u4EE3\u7801\u6253\u5F00\u6587\u4EF6\u540E\u672A\u8C03\u7528close\u65B9\u6CD5\u5BFC\u81F4\u7A0B\u5E8F\u8FD0\u884C\u5230\u4E00\u6BB5\u65F6\u95F4\u5C31\u629B\u51FAToo many files open\u5F02\u5E38\u3002</p><div class="custom-container danger"><p class="custom-container-title">\u6CE8\u610F</p><p><code>lsof</code>\u67E5\u770B\u5230\u7684\u7ED3\u679C\u6570\u548C\u5B9E\u9645\u5E76\u4E0D\u4E00\u81F4\uFF0C\u4EE5\u4E0A\u63CF\u8FF0\u4E0D\u6B63\u786E\uFF0C\u5B9A\u4F4DToo many open files\u95EE\u9898\u4ECD\u7136\u53EF\u6309\u7167\u4E0A\u8FF0\u601D\u8DEF\u627E\u5230\u88AB\u6253\u5F00\u591A\u6B21\u7684\u6587\u4EF6\uFF0C\u7136\u540E\u6839\u636E\u6587\u4EF6\u540D\u53BB\u5B9A\u4F4D\u95EE\u9898\u3002</p></div>`,10),t=[c];function l(o,p){return s(),a("div",null,t)}var r=n(i,[["render",l],["__file","TooManyOpenFiles.html.vue"]]);export{r as default};
