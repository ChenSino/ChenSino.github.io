(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{618:function(s,t,a){"use strict";a.r(t);var n=a(10),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h3",{attrs:{id:"_1、降级软件包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、降级软件包"}},[s._v("#")]),s._v(" 1、降级软件包")]),s._v(" "),a("p",[s._v("安装downgrade程序\n"),a("code",[s._v("sudo pacman -S downgrade")]),s._v("\n降级\n"),a("code",[s._v("sudo DOWNGRADE_FROM_ALA=1 downgrade xxx包")]),s._v("\n注意DOWNGRADE_FROM_ALA=1一定要按照我上边这样写，不能单独export DOWNGRADE_FROM_ALA=1\n设置忽略升级的包\n第二步会让你选择更新的时候是否要忽略更新，选择y的话，它会在/etc/pacman.conf添加一个忽略，如果不想湖绿，把下面的IgnorePkg注释即可")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://afatpig.oss-cn-chengdu.aliyuncs.com/blog/image-20220322171440300.png",alt:"image-20220322171440300"}})]),s._v(" "),a("h3",{attrs:{id:"_2、开机报错failed-to-start-rotate-log-files"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、开机报错failed-to-start-rotate-log-files"}},[s._v("#")]),s._v(" 2、开机报错failed to start rotate log files")]),s._v(" "),a("h4",{attrs:{id:"_2-1-分析问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-分析问题"}},[s._v("#")]),s._v(" 2.1 分析问题")]),s._v(" "),a("ol",[a("li",[s._v("logrotate是什么\n按照老套路分析，先百度了一下logrotate是什么，参考，说白了就是个日志切割，和java里面的差不多。就是防止单文件日志过大，按照一定的规则切割成多个日志，或者删除，比如设置超过一个月直接删除，或者超过10M直接删除等等。")]),s._v(" "),a("li",[s._v("查看logrotate是什么时候启动，以及启动后的状态。首先我们知道它是一个systemctl启动的service服务。那就到/lib/systemd/system下看一下ll |grep rotate")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v(" ll"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" rota\n-rw-r--r-- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("870")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("月  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" logrotate.service\n-rw-r--r-- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("191")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("月  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" logrotate.timer\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("可以看到和"),a("a",{attrs:{href:"https://blog.csdn.net/chen462488588/article/details/118737574?spm=1001.2014.3001.5501",target:"_blank",rel:"noopener noreferrer"}},[s._v("这个问题"),a("OutboundLink")],1),s._v("一模一样的套路。")]),s._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[s._v("到 logrotate.service查看它实际上执行的是什么命令")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" logrotate.service     \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Unit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Description")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Rotate log files\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Documentation")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("man:logrotate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" man:logrotate.conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("RequiresMountsFor")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/var/log\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ConditionACPower")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Service"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("oneshot\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStart")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/sbin/logrotate /etc/logrotate.conf\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# performance options")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Nice")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("IOSchedulingClass")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("best-effort\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("IOSchedulingPriority")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hardening options")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  details: https://www.freedesktop.org/software/systemd/man/systemd.exec.html")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  no ProtectHome for userdir logs")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  no PrivateNetwork for mail deliviery")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  no NoNewPrivileges for third party rotate scripts")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  no RestrictSUIDSGID for creating setgid directories")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LockPersonality")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MemoryDenyWriteExecute")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PrivateDevices")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PrivateTmp")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ProtectClock")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ProtectControlGroups")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ProtectHostname")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ProtectKernelLogs")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ProtectKernelModules")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ProtectKernelTunables")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ProtectSystem")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("full\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("RestrictNamespaces")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("RestrictRealtime")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br")])]),a("p",[s._v("可以看到"),a("code",[s._v("ExecStart=/usr/sbin/logrotate /etc/logrotate.conf")]),s._v("\n执行的是这个命令，那就好办了，手动以debug模式执行一下此命令")]),s._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[s._v("查看执行结果")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("logrotate")]),s._v(" --debug /etc/logrotate.conf                              \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sudo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" chenkun 的密码：\nWARNING: "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("logrotate")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" debug mode does nothing except printing debug messages"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("  Consider using verbose mode "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("-v"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" instead "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" this is not what you want.\n\nreading config "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" /etc/logrotate.conf\nincluding /etc/logrotate.d\nreading config "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" cups\nreading config "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" lirc\nreading config "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" mysqlrouter\nerror: mysqlrouter:31 unknown option "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'var'")]),s._v(" -- ignoring line\nerror: mysqlrouter:45 unexpected "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nerror: found error "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" mysqlrouter, skipping\nreading config "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" nginx\nreading config "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" samba\nwarning: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'monthly'")]),s._v(" overrides previously specified "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'weekly'")]),s._v("\nReading state from file: /var/lib/logrotate.status\nAllocating "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("hash")]),s._v(" table "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" state file, size "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" entries\nCreating new state\nCreating new state\nCreating new state\nCreating new state\nCreating new state\nCreating new state\nCreating new state\nCreating new state\nCreating new state\nCreating new state\nCreating new state\n\nHandling "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" logs\n\nrotating pattern: /var/log/cups/*_log  weekly "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" rotations"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nempty log files are not rotated, old logs are removed\nconsidering log /var/log/cups/access_log\n  Now: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-07-15 09:24\n  Last rotated at "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-07-11 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":22\n  log does not need rotating "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("log has been rotated at "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-07-11 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":22, "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" is "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("less")]),s._v(" than a week ago"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nconsidering log /var/log/cups/error_log\n  Now: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-07-15 09:24\n  Last rotated at "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-07-11 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":22\n  log does not need rotating "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("log has been rotated at "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-07-11 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":22, "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" is "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("less")]),s._v(" than a week ago"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nrotating pattern: /var/log/lircd  weekly "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" rotations"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nempty log files are not rotated, old logs are removed\nconsidering log /var/log/lircd\n  log /var/log/lircd does not exist -- skipping\n\nrotating pattern: /var/log/nginx/*log  weekly "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" rotations"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nempty log files are not rotated, old logs are removed\nconsidering log /var/log/nginx/access.log\n  Now: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-07-15 09:24\n  Last rotated at "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-06-02 08:34\n  log does not need rotating "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("log is empty"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nnot running postrotate script, since no logs were rotated\n\nrotating pattern: /var/log/samba/log.smbd /var/log/samba/log.nmbd /var/log/samba/*.log  weekly "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" rotations"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nempty log files are not rotated, old logs are removed\nconsidering log /var/log/samba/log.smbd\n  log /var/log/samba/log.smbd does not exist -- skipping\nconsidering log /var/log/samba/log.nmbd\n  log /var/log/samba/log.nmbd does not exist -- skipping\nconsidering log /var/log/samba/*.log\n  log /var/log/samba/*.log does not exist -- skipping\n\nrotating pattern: /var/log/wtmp  monthly "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" rotations"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nempty log files are rotated, only log files "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1048576")]),s._v(" bytes are rotated, old logs are removed\nconsidering log /var/log/wtmp\n  Now: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-07-15 09:24\n  Last rotated at "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-03-20 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":00\n  log does not need rotating "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'minsize'")]),s._v(" directive is used and the log size is smaller than the minsize value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nrotating pattern: /var/log/btmp  monthly "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" rotations"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nempty log files are rotated, old logs are removed\nconsidering log /var/log/btmp\n  Now: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-07-15 09:24\n  Last rotated at "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-07-01 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(":33\n  log does not need rotating "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("log has been rotated at "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-07-01 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(":33, "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" is "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("less")]),s._v(" than a month ago"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br")])]),a("ol",{attrs:{start:"5"}},[a("li",[a("p",[s._v("在日志中找error")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://afatpig.oss-cn-chengdu.aliyuncs.com/blog/image-20220322171948840.png",alt:"image-20220322171948840"}})])]),s._v(" "),a("li",[a("p",[s._v("报错很明显了是mysqlroute的日志切割失败了。")])]),s._v(" "),a("li",[a("p",[s._v("logrotate其实是被很多程序都使用了，其配置文件在/etc/logrotate.d下")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://afatpig.oss-cn-chengdu.aliyuncs.com/blog/image-20220322172023905.png",alt:"image-20220322172023905"}})])])]),s._v(" "),a("p",[s._v("可以看到nginx ，mysqlrouter，Samba等都用了logrotate，并且他们都有自己的配置，根据上面我们已经知道了是mysqlrouter配置有问题，我们只需要打开nginx的配置和mysqlrouter对比就知道了。经过比我我的mysqlrouter的配置文件在var前面少了一个/ 加上就好了")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://afatpig.oss-cn-chengdu.aliyuncs.com/blog/image-20220322172038617.png",alt:"image-20220322172038617"}})]),s._v(" "),a("h3",{attrs:{id:"linux下输入法无法输入中文中括号问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#linux下输入法无法输入中文中括号问题"}},[s._v("#")]),s._v(" linux下输入法无法输入中文中括号问题")]),s._v(" "),a("p",[s._v("如果使用的是fcitx5，修改/usr/share/fcitx5/punctuation/punc.mb.zh_CN下的对应符号即可，打开文件有两列，第一列代表英文\n状态下的符号，第二列是中文下符号。\n有时发现无论怎么输入都只有英文，那么就续呀点击一下输入法上的半角符号")])])}),[],!1,null,null,null);t.default=e.exports}}]);