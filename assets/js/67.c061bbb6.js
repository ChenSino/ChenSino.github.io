(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{622:function(s,a,t){"use strict";t.r(a);var n=t(10),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h3",{attrs:{id:"_1、降级软件包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、降级软件包"}},[s._v("#")]),s._v(" 1、降级软件包")]),s._v(" "),t("p",[s._v("安装downgrade程序\n"),t("code",[s._v("sudo pacman -S downgrade")]),s._v("\n降级\n"),t("code",[s._v("sudo DOWNGRADE_FROM_ALA=1 downgrade xxx包")]),s._v("\n注意DOWNGRADE_FROM_ALA=1一定要按照我上边这样写，不能单独export DOWNGRADE_FROM_ALA=1\n设置忽略升级的包\n第二步会让你选择更新的时候是否要忽略更新，选择y的话，它会在/etc/pacman.conf添加一个忽略，如果不想湖绿，把下面的IgnorePkg注释即可")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://afatpig.oss-cn-chengdu.aliyuncs.com/blog/image-20220322171440300.png",alt:"image-20220322171440300"}})]),s._v(" "),t("h3",{attrs:{id:"_2、开机报错failed-to-start-rotate-log-files"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、开机报错failed-to-start-rotate-log-files"}},[s._v("#")]),s._v(" 2、开机报错failed to start rotate log files")]),s._v(" "),t("h4",{attrs:{id:"_2-1-分析问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-分析问题"}},[s._v("#")]),s._v(" 2.1 分析问题")]),s._v(" "),t("ol",[t("li",[s._v("logrotate是什么\n按照老套路分析，先百度了一下logrotate是什么，参考，说白了就是个日志切割，和java里面的差不多。就是防止单文件日志过大，按照一定的规则切割成多个日志，或者删除，比如设置超过一个月直接删除，或者超过10M直接删除等等。")]),s._v(" "),t("li",[s._v("查看logrotate是什么时候启动，以及启动后的状态。首先我们知道它是一个systemctl启动的service服务。那就到/lib/systemd/system下看一下ll |grep rotate")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v(" ll"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" rota\n-rw-r--r-- "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("870")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("月  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" logrotate.service\n-rw-r--r-- "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("191")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("月  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" logrotate.timer\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("可以看到和"),t("a",{attrs:{href:"https://blog.csdn.net/chen462488588/article/details/118737574?spm=1001.2014.3001.5501",target:"_blank",rel:"noopener noreferrer"}},[s._v("这个问题"),t("OutboundLink")],1),s._v("一模一样的套路。")]),s._v(" "),t("ol",{attrs:{start:"3"}},[t("li",[s._v("到 logrotate.service查看它实际上执行的是什么命令")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" logrotate.service     \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Unit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Rotate log files\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Documentation")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("man:logrotate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" man:logrotate.conf"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("RequiresMountsFor")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/var/log\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ConditionACPower")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Service"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Type")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("oneshot\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/sbin/logrotate /etc/logrotate.conf\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# performance options")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Nice")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("IOSchedulingClass")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("best-effort\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("IOSchedulingPriority")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hardening options")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  details: https://www.freedesktop.org/software/systemd/man/systemd.exec.html")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  no ProtectHome for userdir logs")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  no PrivateNetwork for mail deliviery")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  no NoNewPrivileges for third party rotate scripts")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  no RestrictSUIDSGID for creating setgid directories")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LockPersonality")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MemoryDenyWriteExecute")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PrivateDevices")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PrivateTmp")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ProtectClock")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ProtectControlGroups")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ProtectHostname")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ProtectKernelLogs")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ProtectKernelModules")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ProtectKernelTunables")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ProtectSystem")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("full\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("RestrictNamespaces")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("RestrictRealtime")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br")])]),t("p",[s._v("可以看到"),t("code",[s._v("ExecStart=/usr/sbin/logrotate /etc/logrotate.conf")]),s._v("\n执行的是这个命令，那就好办了，手动以debug模式执行一下此命令")]),s._v(" "),t("ol",{attrs:{start:"4"}},[t("li",[s._v("查看执行结果")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("logrotate")]),s._v(" --debug /etc/logrotate.conf                              \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sudo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" chenkun 的密码：\nWARNING: "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("logrotate")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" debug mode does nothing except printing debug messages"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("  Consider using verbose mode "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("-v"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" instead "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" this is not what you want.\n\nreading config "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" /etc/logrotate.conf\nincluding /etc/logrotate.d\nreading config "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" cups\nreading config "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" lirc\nreading config "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" mysqlrouter\nerror: mysqlrouter:31 unknown option "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'var'")]),s._v(" -- ignoring line\nerror: mysqlrouter:45 unexpected "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nerror: found error "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" mysqlrouter, skipping\nreading config "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" nginx\nreading config "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" samba\nwarning: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'monthly'")]),s._v(" overrides previously specified "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'weekly'")]),s._v("\nReading state from file: /var/lib/logrotate.status\nAllocating "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("hash")]),s._v(" table "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" state file, size "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" entries\nCreating new state\nCreating new state\nCreating new state\nCreating new state\nCreating new state\nCreating new state\nCreating new state\nCreating new state\nCreating new state\nCreating new state\nCreating new state\n\nHandling "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" logs\n\nrotating pattern: /var/log/cups/*_log  weekly "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" rotations"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nempty log files are not rotated, old logs are removed\nconsidering log /var/log/cups/access_log\n  Now: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-07-15 09:24\n  Last rotated at "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-07-11 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":22\n  log does not need rotating "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("log has been rotated at "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-07-11 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":22, "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" is "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("less")]),s._v(" than a week ago"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nconsidering log /var/log/cups/error_log\n  Now: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-07-15 09:24\n  Last rotated at "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-07-11 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":22\n  log does not need rotating "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("log has been rotated at "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-07-11 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":22, "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" is "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("less")]),s._v(" than a week ago"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nrotating pattern: /var/log/lircd  weekly "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" rotations"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nempty log files are not rotated, old logs are removed\nconsidering log /var/log/lircd\n  log /var/log/lircd does not exist -- skipping\n\nrotating pattern: /var/log/nginx/*log  weekly "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" rotations"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nempty log files are not rotated, old logs are removed\nconsidering log /var/log/nginx/access.log\n  Now: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-07-15 09:24\n  Last rotated at "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-06-02 08:34\n  log does not need rotating "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("log is empty"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nnot running postrotate script, since no logs were rotated\n\nrotating pattern: /var/log/samba/log.smbd /var/log/samba/log.nmbd /var/log/samba/*.log  weekly "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" rotations"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nempty log files are not rotated, old logs are removed\nconsidering log /var/log/samba/log.smbd\n  log /var/log/samba/log.smbd does not exist -- skipping\nconsidering log /var/log/samba/log.nmbd\n  log /var/log/samba/log.nmbd does not exist -- skipping\nconsidering log /var/log/samba/*.log\n  log /var/log/samba/*.log does not exist -- skipping\n\nrotating pattern: /var/log/wtmp  monthly "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" rotations"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nempty log files are rotated, only log files "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1048576")]),s._v(" bytes are rotated, old logs are removed\nconsidering log /var/log/wtmp\n  Now: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-07-15 09:24\n  Last rotated at "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-03-20 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":00\n  log does not need rotating "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'minsize'")]),s._v(" directive is used and the log size is smaller than the minsize value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nrotating pattern: /var/log/btmp  monthly "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" rotations"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nempty log files are rotated, old logs are removed\nconsidering log /var/log/btmp\n  Now: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-07-15 09:24\n  Last rotated at "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-07-01 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(":33\n  log does not need rotating "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("log has been rotated at "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-07-01 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(":33, "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" is "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("less")]),s._v(" than a month ago"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br"),t("span",{staticClass:"line-number"},[s._v("69")]),t("br"),t("span",{staticClass:"line-number"},[s._v("70")]),t("br"),t("span",{staticClass:"line-number"},[s._v("71")]),t("br"),t("span",{staticClass:"line-number"},[s._v("72")]),t("br"),t("span",{staticClass:"line-number"},[s._v("73")]),t("br"),t("span",{staticClass:"line-number"},[s._v("74")]),t("br"),t("span",{staticClass:"line-number"},[s._v("75")]),t("br"),t("span",{staticClass:"line-number"},[s._v("76")]),t("br"),t("span",{staticClass:"line-number"},[s._v("77")]),t("br")])]),t("ol",{attrs:{start:"5"}},[t("li",[t("p",[s._v("在日志中找error")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://afatpig.oss-cn-chengdu.aliyuncs.com/blog/image-20220322171948840.png",alt:"image-20220322171948840"}})])]),s._v(" "),t("li",[t("p",[s._v("报错很明显了是mysqlroute的日志切割失败了。")])]),s._v(" "),t("li",[t("p",[s._v("logrotate其实是被很多程序都使用了，其配置文件在/etc/logrotate.d下")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://afatpig.oss-cn-chengdu.aliyuncs.com/blog/image-20220322172023905.png",alt:"image-20220322172023905"}})])])]),s._v(" "),t("p",[s._v("可以看到nginx ，mysqlrouter，Samba等都用了logrotate，并且他们都有自己的配置，根据上面我们已经知道了是mysqlrouter配置有问题，我们只需要打开nginx的配置和mysqlrouter对比就知道了。经过比我我的mysqlrouter的配置文件在var前面少了一个/ 加上就好了")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://afatpig.oss-cn-chengdu.aliyuncs.com/blog/image-20220322172038617.png",alt:"image-20220322172038617"}})]),s._v(" "),t("h3",{attrs:{id:"linux下输入法无法输入中文中括号问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux下输入法无法输入中文中括号问题"}},[s._v("#")]),s._v(" linux下输入法无法输入中文中括号问题")]),s._v(" "),t("p",[s._v("如果使用的是fcitx5，修改/usr/share/fcitx5/punctuation/punc.mb.zh_CN下的对应符号即可，打开文件有两列，第一列代表英文\n状态下的符号，第二列是中文下符号。\n有时发现无论怎么输入都只有英文，那么就续呀点击一下输入法上的半角符号")]),s._v(" "),t("h3",{attrs:{id:"_3、美化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、美化"}},[s._v("#")]),s._v(" 3、美化")]),s._v(" "),t("p",[s._v("kde设置proxy有个很大的bug,就是无法全局，搞笑的是通过kde设置的proxy,它自己都无法使用，在国内用kde下载主题、图标等根本下载不动。")]),s._v(" "),t("p",[s._v("解决办法就是挂梯子，下载后手动安装，")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://afatpig.oss-cn-chengdu.aliyuncs.com/blog/image-20220418155819498.png",alt:"image-20220418155819498"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"http://afatpig.oss-cn-chengdu.aliyuncs.com/blog/image-20220418155847045.png",alt:"image-20220418155847045"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"http://afatpig.oss-cn-chengdu.aliyuncs.com/blog/image-20220418155927678.png",alt:"image-20220418155927678"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"http://afatpig.oss-cn-chengdu.aliyuncs.com/blog/image-20220418155956979.png",alt:"image-20220418155956979"}})]),s._v(" "),t("h3",{attrs:{id:"_4、设置yakuake提示没有权限修改文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4、设置yakuake提示没有权限修改文件"}},[s._v("#")]),s._v(" 4、设置yakuake提示没有权限修改文件")]),s._v(" "),t("ol",[t("li",[s._v("修改yakuake的文字大小")])]),s._v(" "),t("p",[t("img",{attrs:{src:"http://afatpig.oss-cn-chengdu.aliyuncs.com/blog/image-20220419110311199.png",alt:"image-20220419110311199"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"http://afatpig.oss-cn-chengdu.aliyuncs.com/blog/image-20220419110401735.png",alt:"image-20220419110401735"}})]),s._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[s._v("保存时会报错，大概是没有"),t("code",[s._v("/usr/share/konsole")]),s._v("的权限")]),s._v(" "),t("li",[s._v("添加一下权限就行了")])]),s._v(" "),t("p",[s._v("​\t\t给当前用户添加一下权限，"),t("code",[s._v("chmod 666 xxx")])]),s._v(" "),t("h3",{attrs:{id:"_3、manjaro不支持mysql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、manjaro不支持mysql"}},[s._v("#")]),s._v(" 3、Manjaro不支持Mysql")]),s._v(" "),t("blockquote",[t("p",[s._v("在Manjaro上使用mysql,经常会遇到libicu不兼容问题，即使解决了，下次系统滚动升级可能又会出现")])]),s._v(" "),t("h4",{attrs:{id:"_3-1-使用mariadb代替mysql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-使用mariadb代替mysql"}},[s._v("#")]),s._v(" 3.1 使用MariaDB代替mysql")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://afatpig.oss-cn-chengdu.aliyuncs.com/blog/image-20220502211444881.png",alt:"image-20220502211444881"}})]),s._v(" "),t("h4",{attrs:{id:"_3-2-使用docker安装mysql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-使用docker安装mysql"}},[s._v("#")]),s._v(" 3.2 使用docker安装Mysql")])])}),[],!1,null,null,null);a.default=e.exports}}]);