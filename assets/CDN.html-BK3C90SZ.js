import{_ as p}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as o,o as s,c as i,a as e,b as n,d as c,e as t}from"./app-Cf-knFG-.js";const d={},r=t(`<h4 id="_1、什么是cdn" tabindex="-1"><a class="header-anchor" href="#_1、什么是cdn"><span>1、什么是CDN？</span></a></h4><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>CDN（Content Delivery Network，内容分发网络）是构建在现有互联网基础之上的一层智能虚拟网络，通过在网络各处部署节点服务器，实现将源站内容分发至所有CDN节点，使用户可以就近获得所需的内容。CDN服务缩短了用户查看内容的访问延迟，提高了用户访问网站的响应速度与网站的可用性，解决了网络带宽小、用户访问量大、网点分布不均等问题。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_2、工作原理" tabindex="-1"><a class="header-anchor" href="#_2、工作原理"><span>2、工作原理</span></a></h4>`,3),l={href:"https://support.huaweicloud.com/productdesc-cdn/cdn_01_0109.html",target:"_blank",rel:"noopener noreferrer"},h=t('<p>当用户访问使用CDN服务的网站时，本地DNS服务器通过CNAME方式将最终域名请求重定向到CDN服务。CDN通过一组预先定义好的策略(如内容类型、地理区域、网络负载状况等)，将当时能够最快响应用户的CDN节点IP地址提供给用户，使用户可以以最快的速度获得网站内容。使用CDN后的HTTP请求处理流程如下。</p><p><img src="https://afatpig.oss-cn-chengdu.aliyuncs.com/blog/zh-cn_image_0000001129063959.png" alt="img"></p><p>HTTP请求流程说明：</p><ol><li>用户在浏览器输入要访问的网站域名www.example.com，向本地DNS发起域名解析请求。</li><li>本地DNS检查缓存中是否有www.example.com的IP地址记录。如果有，则直接返回给终端用户；如果没有，则向网站授权DNS查询。</li><li>网站DNS服务器解析发现域名已经解析到了CNAME：www.example.com.c.cdnhwc1.com。</li><li>请求被指向CDN服务。</li><li>CDN对域名进行智能解析，将响应速度最快的CDN节点IP地址返回给本地DNS。</li><li>用户获取响应速度最快的CDN节点IP地址。</li><li>浏览器在得到最佳节点的IP地址以后，向CDN节点发出访问请求。 <ul><li>如果该IP地址对应的节点已缓存该资源，节点将数据直接返回给用户，如图中步骤7和8，请求结束。</li><li>如果该IP地址对应的节点未缓存该资源，节点回源请求资源。获取资源后，结合用户自定义配置的缓存策略，将资源缓存至节点，如图中的北京节点，并返回给用户，请求结束。</li></ul></li></ol><h4 id="_3、cdn应用场景" tabindex="-1"><a class="header-anchor" href="#_3、cdn应用场景"><span>3、CDN应用场景</span></a></h4>',5),m={href:"https://support.huaweicloud.com/productdesc-cdn/cdn_01_0067.html",target:"_blank",rel:"noopener noreferrer"},N=t(`<h5 id="_3-1-网站加速" tabindex="-1"><a class="header-anchor" href="#_3-1-网站加速"><span>3.1 网站加速</span></a></h5><p>适用于有加速需求的网站，包括门户网站、电商平台、资讯APP、UGC应用（User Generated Content，用户原创内容）等。CDN网络能够对加速域名下的静态内容提供良好的加速服务。支持自定义缓存规则，用户可以根据数据需求设置缓存过期时间，缓存格式包括但不限于zip、exe、wmv、gif、png、bmp、wma、rar、jpeg、jpg等。</p><p><img src="https://support.huaweicloud.com/productdesc-cdn/zh-cn_image_0170805353.png" alt="img"></p><h5 id="_3-2-文件下载加速" tabindex="-1"><a class="header-anchor" href="#_3-2-文件下载加速"><span>3.2 文件下载加速</span></a></h5><p>适用于使用http/https文件下载业务的网站、下载工具、游戏客户端、APP商店等。现在越来越多的新业务需要通过网络对客户端软件进行实时更新，包括APP更新，手游更新等，传统的下载类业务也需要支持更多的文件数量和更大的文件，如果所有的请求都通过源站服务器来处理，服务器和网络会成为很大的瓶颈，导致下载体验变差。使用CDN下载加速可以将下载量大的内容分发到各地的CDN节点，有效减轻源站的压力，同时保证了客户端高速下载的需求。</p><p><img src="https://support.huaweicloud.com/productdesc-cdn/zh-cn_image_0170805965.png" alt="img"></p><h5 id="_3-3-点播加速" tabindex="-1"><a class="header-anchor" href="#_3-3-点播加速"><span>3.3 点播加速</span></a></h5><p>适用于提供音视频点播服务的客户。例如：在线教育类网站、在线视频分享网站、互联网电视点播平台、音乐视频点播APP等。传统的点播服务会加大服务器的负载，并消耗巨大的带宽资源，同时又无法保证终端用户访问时需要的高速体验，CDN点播加速可以提供快速、稳定和安全的点播加速服务，通过分布在各个区域的CDN节点，将音视频内容扩展到距离用户较近的地方，随时随地为用户提供高品质的访问体验。</p><p><img src="https://support.huaweicloud.com/productdesc-cdn/zh-cn_image_0170806639.png" alt="点击放大"></p><h5 id="_3-4-全站加速" tabindex="-1"><a class="header-anchor" href="#_3-4-全站加速"><span>3.4 全站加速</span></a></h5><p>适用于各行业动静态内容混合，含较多动态资源请求（如asp、jsp、php等格式的文件）的网站。全站加速融合了动态和静态加速，用户请求资源时，静态内容从边缘节点就近获取，动态内容通过动态加速技术智能选择较优路由回源获取。CDN全站加速有效提升动态页面的加载速度，避开网络拥堵路由，提高访问成功率，实现网站整体加速与实时优化。</p><h4 id="_4、cdn加速原理" tabindex="-1"><a class="header-anchor" href="#_4、cdn加速原理"><span>4、CDN加速原理</span></a></h4><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>当用户访问使用CDN服务的网站时，本地DNS服务器通过CNAME方式将最终域名请求重定向到CDN服务。CDN通过一组预先定义好的策略(如内容类型、地理区域、网络负载状况等)，将当时能够最快响应用户的CDN节点IP地址提供给用户，使用户可以以最快的速度获得网站内容。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h5 id="_4-1-cdn节点无缓存场景" tabindex="-1"><a class="header-anchor" href="#_4-1-cdn节点无缓存场景"><span>4.1 <strong>CDN节点无缓存场景</strong></span></a></h5><p><img src="https://res-static.hc-cdn.cn/SEO/CDN节点无缓存场景.jpg" alt="CDN节点无缓存场景"></p><p>HTTP请求流程说明：</p><p>1、用户在浏览器输入要访问的网站域名，向本地DNS发起域名解析请求。</p><p>2、域名解析的请求被发往网站授权DNS服务器。</p><p>3、网站DNS服务器解析发现域名已经CNAME到了www.example.com.c.cdnhwc1.com。</p><p>4、请求被指向CDN服务。</p><p>5、CDN对域名进行智能解析，将响应速度最快的CDN节点IP地址返回给本地DNS。</p><p>6、用户获取响应速度最快的CDN节点IP地址。</p><p>7、浏览器在得到速度最快节点的IP地址以后，向CDN节点发出访问请求。</p><p>8、CDN节点回源站拉取用户所需资源。（==无缓存时，第一次请求要回源地址获取资源，因此第一次请求会感觉仍然慢==）</p><p>9、将回源拉取的资源缓存至节点。</p><p>10、将用户所需资源返回给用户。</p><h5 id="_4-2-cdn节点有缓存场景" tabindex="-1"><a class="header-anchor" href="#_4-2-cdn节点有缓存场景"><span>4.2 CDN节点有缓存场景</span></a></h5><p><img src="https://res-static.hc-cdn.cn/SEO/CDN节点有缓存场景.jpg" alt="CDN节点有缓存场景"></p><p>HTTP请求流程说明：</p><p>1、用户在浏览器输入要访问的网站域名，向本地DNS发起域名解析请求。</p><p>2、域名解析的请求被发往网站授权DNS服务器。</p><p>3、网站DNS服务器解析发现域名已经CNAME到了www.example.com.c.cdnhwc1.com。</p><p>4、请求被指向CDN服务。</p><p>5、CDN对域名进行智能解析，将响应速度最快的CDN节点IP地址返回给本地DNS。</p><p>6、用户获取响应速度最快的CDN节点IP地址。</p><p>7、浏览器在得到速度最快节点的IP地址以后，向CDN节点发出访问请求。</p><p>8、CDN节点将用户所需资源返回给用户。</p><h4 id="_5、如何使用华为云cdn" tabindex="-1"><a class="header-anchor" href="#_5、如何使用华为云cdn"><span>5、如何使用华为云CDN？</span></a></h4>`,38),C={href:"https://support.huaweicloud.com/cdn/index.html",target:"_blank",rel:"noopener noreferrer"},D=t(`<p>举例说明：我要开通加速的地址是h.sonoscape.com，是公司下的一个子域名，则开通cdn的步骤如下：</p><ol><li><p>在华为云花钱开通CDN服务；</p></li><li><p>添加加速域名，就是把你要加速的域名到华为控制台配置以下，配置好后，它会根据你的域名生成一个CNAME，类似h.sonoscape.com.7bf9428.c.cdnhwc1.com这样；</p></li><li><p>配置CNAME解析，要看你的域名是哪里来的，这个h.sonoscape.com是从公司申请的，因此要找公司IT部门去配置一个CNAME，把h.sonoscape.com下配置一个cname，h.sonoscape.com.7bf9428.c.cdnhwc1.com，配置好一般两小时生效；</p></li><li><p>验证cname是否生效</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>nslookup -qt=cname h.sonoscape.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>如果回显CNAME，则表示CNAME配置已经生效，如下图：</p><p><img src="https://support.huaweicloud.com/qs-cdn/zh-cn_image_0298980912.png" alt="点击放大"></p></li></ol><h4 id="_6、问题" tabindex="-1"><a class="header-anchor" href="#_6、问题"><span>6、问题</span></a></h4><ol><li><p>为何第一次请求感觉CDN没用？</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>正常，由于首次访问时，CDN未对源站的相关资源进行缓存，需要回源拉取资源。您可以在首次访问前，进行缓存预热，将访问频率高的资源预热到CDN。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol>`,4);function u(g,_){const a=o("ExternalLinkIcon");return s(),i("div",null,[r,e("p",null,[e("a",l,[n("cdn原理"),c(a)])]),h,e("p",null,[e("a",m,[n("华为云关于CDN应用场景介绍"),c(a)])]),N,e("p",null,[e("a",C,[n("华为云CDN配置"),c(a)])]),D])}const w=p(d,[["render",u],["__file","CDN.html.vue"]]),f=JSON.parse('{"path":"/other/essay/CDN.html","title":"CDN静态资源加速","lang":"zh-CN","frontmatter":{"title":"CDN静态资源加速","date":"2020-02-20T00:00:00.000Z","author":"John","sticky":8,"tag":["运维"],"description":"1、什么是CDN？ 2、工作原理 cdn原理 当用户访问使用CDN服务的网站时，本地DNS服务器通过CNAME方式将最终域名请求重定向到CDN服务。CDN通过一组预先定义好的策略(如内容类型、地理区域、网络负载状况等)，将当时能够最快响应用户的CDN节点IP地址提供给用户，使用户可以以最快的速度获得网站内容。使用CDN后的HTTP请求处理流程如下。 i...","head":[["meta",{"property":"og:url","content":"https://ChenSino.github.io/other/essay/CDN.html"}],["meta",{"property":"og:site_name","content":"ChenSino"}],["meta",{"property":"og:title","content":"CDN静态资源加速"}],["meta",{"property":"og:description","content":"1、什么是CDN？ 2、工作原理 cdn原理 当用户访问使用CDN服务的网站时，本地DNS服务器通过CNAME方式将最终域名请求重定向到CDN服务。CDN通过一组预先定义好的策略(如内容类型、地理区域、网络负载状况等)，将当时能够最快响应用户的CDN节点IP地址提供给用户，使用户可以以最快的速度获得网站内容。使用CDN后的HTTP请求处理流程如下。 i..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://afatpig.oss-cn-chengdu.aliyuncs.com/blog/zh-cn_image_0000001129063959.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2022-08-01T13:56:59.000Z"}],["meta",{"property":"article:author","content":"John"}],["meta",{"property":"article:tag","content":"运维"}],["meta",{"property":"article:published_time","content":"2020-02-20T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2022-08-01T13:56:59.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"CDN静态资源加速\\",\\"image\\":[\\"https://afatpig.oss-cn-chengdu.aliyuncs.com/blog/zh-cn_image_0000001129063959.png\\",\\"https://support.huaweicloud.com/productdesc-cdn/zh-cn_image_0170805353.png\\",\\"https://support.huaweicloud.com/productdesc-cdn/zh-cn_image_0170805965.png\\",\\"https://support.huaweicloud.com/productdesc-cdn/zh-cn_image_0170806639.png\\",\\"https://res-static.hc-cdn.cn/SEO/CDN%E8%8A%82%E7%82%B9%E6%97%A0%E7%BC%93%E5%AD%98%E5%9C%BA%E6%99%AF.jpg\\",\\"https://res-static.hc-cdn.cn/SEO/CDN%E8%8A%82%E7%82%B9%E6%9C%89%E7%BC%93%E5%AD%98%E5%9C%BA%E6%99%AF.jpg\\",\\"https://support.huaweicloud.com/qs-cdn/zh-cn_image_0298980912.png\\"],\\"datePublished\\":\\"2020-02-20T00:00:00.000Z\\",\\"dateModified\\":\\"2022-08-01T13:56:59.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"John\\"}]}"]]},"headers":[],"git":{"createdTime":1659362219000,"updatedTime":1659362219000,"contributors":[{"name":"chenkun","email":"462488588@qq.com","commits":1}]},"readingTime":{"minutes":7.18,"words":2153},"filePathRelative":"other/essay/CDN.md","localizedDate":"2020年2月20日","excerpt":"<h4>1、什么是CDN？</h4>\\n<div class=\\"language-text\\" data-ext=\\"text\\" data-title=\\"text\\"><pre class=\\"language-text\\"><code>CDN（Content Delivery Network，内容分发网络）是构建在现有互联网基础之上的一层智能虚拟网络，通过在网络各处部署节点服务器，实现将源站内容分发至所有CDN节点，使用户可以就近获得所需的内容。CDN服务缩短了用户查看内容的访问延迟，提高了用户访问网站的响应速度与网站的可用性，解决了网络带宽小、用户访问量大、网点分布不均等问题。\\n</code></pre></div>","autoDesc":true}');export{w as comp,f as data};
